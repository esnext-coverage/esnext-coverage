#!/usr/bin/env node

var program = require('commander');
var pkg = require('../package.json');

program.version(pkg.version);

program
  .command('cover <files>')
  .option('-f --format [formatter]', 'Format the result')
  .option('-o --out-file [file]', 'Write the result to a file')
  .action(require('../lib/actions/cover'));

//
// instrument
// --------------------

program
  .command('instrument [file]')
  .description([
    'Takes file contents from stdin or a file path as argument,',
    'instruments the file, and writes the instrumented code to stdout',
    'or to a file if "-o, --out-file" option is provided.'
  ].join('\n  '))
  .option('-o, --out-file [file]', 'write instrumented code to a file')
  .action(require('../lib/actions/instrument'))
  .on('--help', require('../lib/help/instrument'));

program
  .command('collect [files]')
  .option('-f --format [formatter]', 'Format the result')
  .option('-o --out-file [file]', 'Write the result to a file')
  .action(require('../lib/actions/collect'));

//
// format
// --------------------

program
  .command('format [file]')
  .description('transforms coverage data to specified format')
  .option('-f, --formatter [formatter]', 'formatter to use')
  .option('-o, --out-file [file]', 'write the result to a file')
  .action(require('../lib/actions/format'))
  .on('--help', require('../lib/help/format'));

program.parse(process.argv);
